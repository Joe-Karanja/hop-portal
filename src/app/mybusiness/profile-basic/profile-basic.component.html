<div *ngIf="loading" class="spinner">
  <nz-spin nzTip="Loading..." nzSimple [nzSize]="'large'"></nz-spin>
</div>
<div nz-row class="ma-1 row">
    <div nz-col nzSpan="12" fxLayout="col" fxLayoutAlign="center center" >
        <nz-card style="width:100%;"  class="pa-1 my-2" [nzLoading]="loading" *ngIf="business != null">
            <div class="companyName"> {{business.businessName}}
                <nz-tag *ngIf="business.approvalStatus == 'APPROVED'" nzColor="success" nzShape="round">APPROVED</nz-tag>
                <nz-tag *ngIf="business.approvalStatus == 'PENDING'" nzColor="gold" nzShape="round">PENDING</nz-tag>
                <nz-tag *ngIf="business.approvalStatus == 'DECLINED'" nzColor="error" nzShape="round">DECLINED</nz-tag>
                <br></div>
            <div class="item"><span>Location: </span> {{business.location}}<br></div>
            <div class="item"><span>Business Type: </span> {{business.businessType}}<br></div>
            <div class="item"><span>Business SubSector: </span> {{business.businessSubsector}}<br></div>
            <div class="item"><span>Phone: </span> {{business.businessPhoneNumber}}<br></div>
            <div class="item"><span>Email: </span> {{business.businessEmail}}<br></div>
            <div class="item"><span>Employees: </span> {{business.businessCapacity}}<br></div>
            <div class="item"><span>Created On: </span> {{business.createdOn}}<br></div>
        </nz-card>
    </div>
    <div nz-col nzSpan="12" fxLayout="col" fxLayoutAlign="center" class=" ">
        <nz-card style="width:100%;" class="pa-1 my-2" [nzLoading]="loading" *ngIf="business != null">
            <div class="card">
              <span class="docDesc">Value Added Tax Certificate: </span> 
              <div class="item">
                <button *ngIf="business.vatForm != ''" nz-button (click)="openModal(content, business.vatForm)" nzSize="small"  nzType="primary" >
                  view
                </button>
                <button *ngIf="business.vatForm != ''" nz-button nzSize="small"  nzType="link" >
                  update
                </button>
                <button nz-button nzType="link"  *ngIf="business.vatForm == ''">No document</button>
                  <br>
              </div>
            </div>
            <div class="card">
              <span class="docDesc">KRA Certificate </span> 
              <div class="item">
                <button *ngIf="business.kraCertificate != ''" nz-button (click)="openModal(content, business.kraCertificate)" nzSize="small"  nzType="primary" >
                  view
                </button>
                <button *ngIf="business.kraCertificate != ''" nz-button nzSize="small"  nzType="link" >
                  update
                </button>
                <button nz-button nzType="link"  *ngIf="business.kraCertificate == ''">No document</button>
                  <br>
              </div>
            </div>
            <div class="card">
              <span class="docDesc">Registration Certificate: </span> 
              <div class="item">
                <button *ngIf="business.certificateOfRegistration != ''" nz-button (click)="openModal(content, business.certificateOfRegistration)" nzSize="small"  nzType="primary" >
                  view
                </button>
                <button *ngIf="business.certificateOfRegistration != ''" nz-button  nzSize="small"  nzType="link" >
                  Update
                </button>
                <button nz-button nzType="link"  *ngIf="business.certificateOfRegistration == ''">No document</button>
                  <br>
              </div>
            </div>
        </nz-card>
    </div>
    <div nz-col nzSpan="12" fxLayout="col" fxLayoutAlign="center" class=" ">
      <nz-card style="width: 100%;" class="pa-1" *ngIf="business != null" [nzLoading]="loading">
        <form nz-form [nzLayout]="'inline'" [formGroup]="websiteForm" (ngSubmit)="updateSite($event)" >
          <nz-form-item> 
            
            <nz-form-control nzErrorTip="Required!">
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="nMW">Website</nz-form-label>
              <nz-input-group>
                <input type="text" formControlName="website" nz-input placeholder="Business Website"/>
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item >
            <nz-form-control nzErrorTip="Required!">
              <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="nMW">Twitter</nz-form-label>
              <nz-input-group >
                <input type="text" width="100%" formControlName="twitter"  nz-input placeholder="Twitter Handle" />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control nzErrorTip="Required!">
              <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="nMW">Facebook Profile</nz-form-label>
              <nz-input-group>
                <input type="text" formControlName="facebook"  nz-input placeholder="Facebook Profile " />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control>
              <button nz-button nzType="primary" [loading]="btnLoading" [disabled]="!websiteForm.valid">Update</button>
            </nz-form-control>
          </nz-form-item>
        </form>
      </nz-card>
    </div>
    <div nz-col nzSpan="12" fxLayout="col" fxLayoutAlign="center" class=" ">
      <nz-card style="width: 100%;"  class="pa-1" [nzLoading]="loading" *ngIf="business != null">
        <form nz-form [nzLayout]="'inline'" [formGroup]="aboutForm" (ngSubmit)="updateAbout($event)" >
          <nz-form-item>
          <nz-form-control nzErrorTip="Required!">
            <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="nMW">About</nz-form-label>
            <nz-input-group>
              <textarea formControlName="about" nz-input style="margin-top: 10px;" placeholder="Tell us about your Company. Other users will be able to see your about." [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control nzErrorTip="Required!">
            <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="nMW">Company Mission</nz-form-label>
            <nz-input-group>
              <textarea formControlName="mission" nz-input style="margin-top: 10px;" placeholder="Add Company Mission" [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control nzErrorTip="Required!">
            <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="nMW">Company Vision</nz-form-label>
            <nz-input-group>
              <textarea formControlName="vision" nz-input style="margin-top: 10px;" placeholder="Add Company Vision" [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <button nz-button nzType="primary" [loading]="btnLoading" [disabled]="!aboutForm.valid">Update</button>
          </nz-form-control>
        </nz-form-item>
        </form>
      </nz-card>
    </div>
</div>